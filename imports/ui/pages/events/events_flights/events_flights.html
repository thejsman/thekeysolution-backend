<template name="events_flights">
  <div class="events-flights">
    <div class="row">
      <div class="col s12">
	      <h5 class="page-title">Flight Inventory
          <a class="waves-effect waves-light btn btn-primary" href={{flightAddPath}}><i class="material-icons left">add</i>Add Flight</a>
          <a style="margin-right: 15px;" class="waves-effect waves-light btn btn-primary" href={{flightUploadPath}}><i class="material-icons left">cloud_upload</i>Bulk Assignment</a>
        </h5>
      </div>
    </div>
    <div class="row">
      {{#each flight in flightList}}
	      {{> flight_card flight=flight}}
      {{/each}}
    </div>
  </div>
</template>

<template name="flight_card">
  <div class="col s12 m12 l4">
    <div class="card info-card">
      <div class="card-header amber darken-2">
        <div class="card-title">
          <div class="info-card-title">
            <div class="flight-title">
              {{#with flightStart}}
                {{airportIATA}}
              {{/with}}
              <i class="material-icons flight-icon">airplanemode_active</i>
              {{#with flightEnd}}
                {{airportIATA}}
              {{/with}}
            </div>
            <div class="flight-pnr">PNR: {{flightPNR}}</div>
          </div>
          <div class="airline-name">{{flightAirline}}</div>
          <div class="flight-class">
            {{flightClass}}
          </div>
          <div class="info-card-action">
            <div class="action-btn">
              {{#if isAllowed 'edit-flights'}}
                <a href="{{flightEditPath}}" class="waves-effect btn primary">
                  <i class="fa fa-pencil"></i>
                </a>
              {{/if}}
              {{#if isAllowed 'delete-flights'}}
                <a href="#" class="waves-effect btn primary click_delete-flight" id="{{flight._id}}">
                  <i class="fa fa-trash"></i>
                </a>
              {{/if}}
            </div>
          </div>
          <p class="info-card-date">{{parseDateTime flightDeparture}}</p>
        </div>
      </div>
      <div class="card-content-bg white-text">
        <div class="card-content">
          <div class="row">
            {{#each leg in flightLegs}}
              <div class="row">
                <div class="col s12 center">Flight No. : {{leg.flightNo}}</div>
                <div class="col s5">
                  <span>{{leg.departureCity.airportIATA}}</span><br>
                  <span>{{parseDateTime leg.departureTime}}</span>
                </div>
                <div class="col s2">
                  <i class="material-icons">flight_takeoff</i>
                </div>
                <div class="col s5">
                  <span>{{leg.arrivalCity.airportIATA}}</span><br>
                  <span>{{parseDateTime leg.arrivalTime}}</span>
                </div>
              </div>
            {{/each}}
          </div>
          <div class="row">
            <div class="col s12 center-align card-top-content">
              <h5>Arrival : {{parseDateTime flightArrival}}</h5>
            </div>
            <div class="col s6 m6 l6 center-align">
              <h6>Reserved</h6>
              <p class="small">{{flightReserved}}</p>
            </div>
            <div class="col s6 m6 l6 center-align">
              <h6>Available</h6>
              <p class="small">{{flightAvailable}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
