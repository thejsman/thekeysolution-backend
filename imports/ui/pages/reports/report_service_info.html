<template name="report_service_info">
  <div class="events-guests">
    <div class="row">
      <div class="col s12">
        <h5 class="page-title">Guests Service Info Report</h5>
        <!--<br> {{#if getPrimaryGuestCount}}
            <h5 class="page-title">Primary Guests {{#if getPrimaryGuestCount}}(
              <b>{{getPrimaryGuestCount}}</b>) {{/if}}</h5> {{/if}}
            -->
      </div>
      {{#if getGuestCount}}
      <ul class="pagination">
        <li>
          <a href="#" id="page-minus">
            <i class="material-icons">chevron_left</i>
          </a>
        </li>
        {{#each page in getPagination}}
        <li class="{{ page.isActive }} page-no">
          <a href="#" id="{{ page.pageNo }}">{{indexPlusOne page.pageNo}}</a>
        </li>
        {{/each}}
        <li class="waves-effect">
          <a id="page-plus" href="#!">
            <i class="material-icons">chevron_right</i>
          </a>
        </li>
      </ul>
      {{/if}}
    </div>
    <div>
      <table>
        <tr>
          Total Guests: {{ getGuestCount }}
        </tr>
      </table>
    </div>
    {{#if Template.subscriptionsReady}} {{#if getGuestCount}}
    <div class="row">
      {{> report_service_info_guest_list services=services}}
    </div>
    {{else}}
    <div class="col s12">
      <br />
      <br />
      <h5 class="page-title">No Guests Found</h5>
      <br />
      <br />
    </div>
    {{/if}} {{else}}
    <div class="preloader-wrapper small active">
      <div class="spinner-layer spinner-green-only">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div>
        <div class="gap-patch">
          <div class="circle"></div>
        </div>
        <div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
    {{/if}}
  </div>
</template>

<template name="report_service_info_guest_list">
  <div class="row">
    <div class="col s3"></div>
    <!-- <div class="date-field col s3">
              <input id="startDate" type="text" class="datepicker dateFilter" name="startDate" value="">
              <label for="startDate">Start Date</label>
            </div>
            <div class="date-field col s3">
                <input id="endDate" type="text" class="datepicker dateFilter" name="endDate" value="">
                <label for="endDate">End Date</label>
            </div> -->
    <div class="col s12">
      <div class="guest-action">
        {{#if isAllowed 'guest-export'}}
        <a
          class="waves-effect waves-light btn btn-primary exportReport"
          href="#"
        >
          <i class="material-icons left">add</i>Export Data
          <i
            class="tooltip-icon"
            data-position="top"
            data-delay="50"
            data-tooltip="Download your report"
          ></i>
        </a>
        {{/if}}
      </div>
    </div>
  </div>
  <table class="flightReports">
    <thead>
      <tr>
        <th>#</th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="folioNumber"
            data-sortDirection="-1"
          >
            Folio No.
            <i
              class="tooltip-icon"
              data-position="top"
              data-delay="50"
              data-tooltip="Autogenerated from System"
            ></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestFirstName"
            data-sortDirection="-1"
          >
            Guest Name
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestIsPrimary"
            data-sortDirection="-1"
          >
            Is Primary
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestPersonalEmail"
            data-sortDirection="-1"
          >
            Email ID
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>Contact No.</th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestGender"
            data-sortDirection="-1"
          >
            Gender
          </a>
        </th>
        {{#each key in (keys services)}}
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="serviceName"
            data-sortDirection="1"
          >
            {{ serviceName key services }}</a
          >
        </th>
        {{/each}}
      </tr>
    </thead>
    <tbody>
      {{#each guestList}} {{> report_service_info_guest_item index=@index
      info=this services=../services}} {{/each}} {{> defaultBootstrapPaginator
      pagination=templatePagination limit=5 containerClass="text-center"
      onClick=clickEvent}}
    </tbody>
  </table>
</template>

<template name="report_service_info_guest_item">
  <tr>
    <td>{{PageNumbers index}}</td>
    <td>
      {{padLeft info.folioNumber 5}}
    </td>
    <td>
      {{ info.guestTitle }} {{ info.guestFirstName }} {{ info.guestLastName }}
    </td>
    <td>{{#if info.guestIsPrimary}}Yes{{else}}No{{/if}}</td>
    <td>{{ info.guestPersonalEmail }}</td>
    <!--<td>{{info.loginDateTime}}</td>-->
    <td>{{ info.guestPhoneCode }}-{{ info.guestContactNo }}</td>
    <td class="genderCase">{{ info.guestGender }}</td>

    {{#each key in (keys services)}}
    <th>{{ serviceStatus key info.serviceData }}</th>
    {{/each}}
  </tr>
  <!-- {{#if hasGuestFamilyList}} {{#each guestFamilyList}}
    {{>report_guest_family info2=this index=@index}} {{/each}} {{/if}} -->
</template>
<!--
    <template name="report_guest_family">
    <tr
      style="background-color: #eaeaea"
      class="FamilyMember{{ info2.guestFamilyID }} hide"
    >
      <td>{{indexPlusOne index}}></td>
      <td>
        {{padLeft info2.folioNumber 5}}
      </td>
      <td>
        {{ info2.guestFirstName }} {{ info2.guestLastName }}
      </td>
      <td>{{#if info2.guestIsPrimary}}Yes{{else}}No{{/if}}</td>
      <td>{{ info2.guestPersonalEmail }}</td>
      <td></td>
      <td><td>{{ info2.guestPhoneCode }}-{{ info2.guestContactNo }}</td></td>
    </tr>
    </template>
  -->
