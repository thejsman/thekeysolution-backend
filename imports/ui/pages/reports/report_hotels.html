<template name="report_hotels">
    <div class="events-guests">
        <div class="row">
            <div class="col s12">
                <h5 class="pate-title">Guests Hotels Report</h5>
            </div>
            {{#if getGuestCount}}
            <ul class="pagination">
                <li>
                    <a href="#" id="page-minus">
                        <i class="material-icons">chevron_left</i>
                    </a>
                </li>
                {{#each page in getPagination}}
                <li class="{{page.isActive}} page-no">
                    <a href="#" id="{{page.isActive}}">{{indexPlusOne page.pageNo}}</a>
                </li>
                {{/each}}
                <li class="waves-effect">
                    <a id="page-plus" href="#!">
                        <i class="material-icons">chevron_right</i>
                    </a>
                </li>
            </ul>
            {{/if}}
        </div>
        <div>
            <table>
                <tr>
                    {{#if getGuestCount}} Total Guests: {{getGuestCount}} {{/if}}
                </tr>
            </table>
        </div>

        {{#if Template.subscriptionsReady}} {{#if getGuestCount}}
        <div class="row">
            {{> report_guest_list_hotels}}
        </div>
        {{else}}
        <div class="col s12">
            <h5 class="page-title">No Guest Found With Hotel Booking</h5>
        </div>
        {{/if}} {{else}}
        <div class="preloader-wrapper small active">
            <div class="spinner-layer spinner-green-only">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
        {{/if}}
    </div>
</template>
<template name="report_guest_list_hotels">
    <div class="row">
        <div class="col s9"></div>
        <div class="col s3">
            <div class="guest-action">
                {{#if isAllowed 'guest-export'}}
                <a class="waves-effect waves-light btn btn-primary exportReportHotels" href="#">
                    <i class="material-icons left">add</i>Export Data
                    <i class="tooltip-icon" data-position="top" data-delay="50" data-tooltip="Download your report"></i>
                </a>
                {{/if}}
            </div>
        </div>
    </div>
    <table class="flightReports">
        <thead>
            <tr>
                <th>#</th>
                <th>
                    <a class="sort-data" href="#" data-sort="folioNumber" data-sortDirection="-1">
                        Folio No.
                        <i class="tooltip-icon" data-position="top" data-delay="50"
                            data-tooltip="Autogenerated from System"></i>
                    </a>
                </th>
                <th>
                    <a class="sort-data" href="#" data-sort="guestFirstName" data-sortDirection="-1">
                        Guest Name
                        <i class="fa fa-sort"></i>
                    </a>
                </th>
                <th>
                    <a class="sort-data" href="#" data-sort="guestIsPrimary" data-sortDirection="-1">
                        Is Primary
                        <i class="fa fa-sort"></i>
                    </a>
                </th>
                <th>
                    <a class="sort-data" href="#" data-sort="guestPersonalEmail" data-sortDirection="-1">
                        Email ID
                        <i class="fa fa-sort"></i>
                    </a>
                </th>
                <!-- <th>
                    <a class="sort-data" href="#" data-sort="appLoginTime" data-sortDirection="-1">
                        Loggedin date
                        <i class="fa fa-sort"></i>
                    </a>
                </th> -->
                <th>Contact No.</th>

                {{#each noOfHotels}}
                    {{> hotelHeader}}
                {{/each}}
                
            </tr>
        </thead>
        <tbody>
            {{#each guestListHotels}} 
            {{> report_guest_item_hotels index=@index info=this}} 
            {{/each}} 
            {{> defaultBootstrapPaginator pagination=templatePagination 
                limit=5 containerClass="text-center"  onClick=clickEvent}}
        </tbody>
    </table>
</template>

<template name="report_guest_item_hotels">
    <tr>
        <td>{{PageNumbers index}}</td>
        <td>{{info.folioNumber}}</td>
        <td>
            {{ info.guestTitle }} {{ info.guestFirstName }} {{ info.guestLastName }}
        </td>
        <td>{{#if info.guestIsPrimary}}Yes{{else}}No{{/if}}</td>
        <td>{{ info.guestPersonalEmail }}</td>
        <!-- <td>{{info.loginDateTime}}</td> -->
        <td>{{ info.guestPhoneCode }}-{{ info.guestContactNo }}</td>
        {{#each info.hotelBookings}}
            {{> guest_hotel_list index=@index hotel=this}}
        {{/each}}
        
    </tr>
    {{#if hasGuestFamilyList}} {{#each guestFamilyList}}
    {{>report_guest_family_hotels info2=this index=@index}} {{/each}} {{/if}}
</template>
<template name="report_guest_family_hotels">
    <tr style="background-color: #eaeaea" class="FamilyMember{{ info2.guestFamilyID }} hide">
        <td>{{indexPlusOne index}}></td>
        <td>
            {{padLeft info2.folioNumber 5}}
        </td>
        <td>
            {{ info2.guestFirstName }} {{ info2.guestLastName }}
        </td>
        <td>{{#if info2.guestIsPrimary}}Yes{{else}}No{{/if}}</td>
        <td>{{ info2.guestPersonalEmail }}</td>
        <td></td>
        <td>
        <td>{{ info2.guestPhoneCode }}-{{ info2.guestContactNo }}</td>
        </td>
    </tr>
</template>

<template name="guest_hotel_list">
    <td>{{hotel.hotelName}}</td>
    <td>{{hotel.roomCategory}}</td>
    <td>{{hotel.bedType}}</td>
    <td>{{hotel.checkInDate}}</td>
    <td>{{hotel.checkOutDate}}</td>
    <td>{{hotel.placeHolderRoomNo}}</td>
    <td>{{hotel.displayRoom}}</td>
</template>

<template name="hotelHeader">
    <th>
        <a class="sort-data" href="#" data-sort="hotelName" data-sortDirection="-1">
    Hotel Name
            </a>
</th>	
<th>
        <a class="sort-data" href="#" data-sort="roomCategory" data-sortDirection="-1">
    Room Category
        </a> <a class="sort-data" href="#" data-sort="roomCategory" data-sortDirection="-1"></a>
</th> 
<th>
        <a class="sort-data" href="#" data-sort="bedType" data-sortDirection="-1">
    Bed Type</a></th>	
<th>
        <a class="sort-data" href="#" data-sort="checkInDate" data-sortDirection="-1">
    Check-in Date
</a>
</th>	
<th><a class="sort-data" href="#" data-sort="checkOutDate" data-sortDirection="-1">
    Check-out Date
</a>
</th>	
<th>
        <a class="sort-data" href="#" data-sort="placeHolderRoomNo" data-sortDirection="-1">
    Placeholder Room No.
</a>
</th>	
<th>
        <a class="sort-data" href="#" data-sort="displayRoom" data-sortDirection="-1">
    Display Room No.
</a>
</th>
</template>