<template name="report_merchandise">
  <div class="events-guests">
    <div class="row">
      <div class="col s12">
        <h5 class="page-title">Guests Merchandise Report</h5>
      </div>
      {{#if getGuestCount}}
      <ul class="pagination">
        <li>
          <a href="#" id="page-minus">
            <i class="material-icons">chevron_left</i>
          </a>
        </li>
        {{#each page in getPagination}}
        <li class="{{ page.isActive }} page-no">
          <a href="#" id="{{ page.pageNo }}">{{indexPlusOne page.pageNo}}</a>
        </li>
        {{/each}}
        <li class="waves-effect">
          <a id="page-plus" href="#!">
            <i class="material-icons">chevron_right</i>
          </a>
        </li>
      </ul>
      {{/if}}
    </div>
    <div>
      <table>
        <tr>
          Total Guests: {{ getGuestCount }} & Merchandise Size: {{#each
          sizeOptions}} {{ type }} : {{ value }} {{/each}}
        </tr>
      </table>
    </div>
    {{#if Template.subscriptionsReady}} {{#if getGuestCount}}
    <div class="row">
      {{> report_merchandise_guest_list}}
    </div>
    {{else}}
    <div class="col s12">
      <br />
      <br />
      <h5 class="page-title">No Guests Found</h5>
      <br />
      <br />
    </div>
    {{/if}} {{else}}
    <div class="preloader-wrapper small active">
      <div class="spinner-layer spinner-green-only">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div>
        <div class="gap-patch">
          <div class="circle"></div>
        </div>
        <div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
    {{/if}}
  </div>
</template>

<template name="report_merchandise_guest_list">
  <div class="row">
    <div class="col s3"></div>
    <div class="col s12">
      <div class="guest-action">
        {{#if isAllowed 'guest-export'}}
        <a
          class="waves-effect waves-light btn btn-primary exportReport"
          href="#"
        >
          <i class="material-icons left">add</i>Export Data
          <i
            class="tooltip-icon"
            data-position="top"
            data-delay="50"
            data-tooltip="Download your report"
          ></i>
        </a>
        {{/if}}
      </div>
    </div>
  </div>
  <table class="flightReports">
    <thead>
      <tr>
        <th>#</th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="folioNumber"
            data-sortDirection="-1"
          >
            Folio No.
            <i
              class="tooltip-icon"
              data-position="top"
              data-delay="50"
              data-tooltip="Autogenerated from System"
            ></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestFirstName"
            data-sortDirection="-1"
          >
            Guest Name
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestIsPrimary"
            data-sortDirection="-1"
          >
            Is Primary
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="guestPersonalEmail"
            data-sortDirection="-1"
          >
            Email ID
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>Contact No.</th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="sizePreference"
            data-sortDirection="-1"
          >
            Merchandise Size
            <i class="fa fa-sort"></i>
          </a>
        </th>
        <th>
          <a
            class="sort-data"
            href="#"
            data-sort="sizePreferenceRemark"
            data-sortDirection="-1"
          >
            Merchandise Remark
            <i class="fa fa-sort"></i>
          </a>
        </th>
      </tr>
    </thead>
    <tbody>
      {{#each guestList}} {{> report_merchandise_guest_item index=@index
      info=this}} {{/each}} {{> defaultBootstrapPaginator
      pagination=templatePagination limit=5 containerClass="text-center"
      onClick=clickEvent}}
    </tbody>
  </table>
</template>

<template name="report_merchandise_guest_item">
  <tr>
    <td>{{PageNumbers index}}</td>
    <td>
      {{padLeft info.folioNumber 5}}
    </td>
    <td>
      {{ info.guestTitle }} {{ info.guestFirstName }} {{ info.guestLastName }}
    </td>
    <td>{{#if info.guestIsPrimary}}Yes{{else}}No{{/if}}</td>
    <td>{{ info.guestPersonalEmail }}</td>
    <td>{{ info.guestPhoneCode }}-{{ info.guestContactNo }}</td>
    <td>{{ info.sizePreference }}</td>
    <td>{{ info.sizePreferenceRemark }}</td>
  </tr>
</template>
